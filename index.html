<!DOCTYPE html>
<html>
<head>
  <title>tk</title>
  <meta charset="utf-8">    
    
  <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
  <link href="bootstrap/css/sticky-footer.css" rel="stylesheet">
    
  <script src="js/libs/jquery-1.10.2.js"></script>
  <script src="js/libs/underscore-1.5.1.js"></script>
  <script src="js/libs/keypress.js"></script>

  <script src="js/utils.js"></script>

<style>
  .stroj {font-family: "Lucida Console", Courier, monospace;}
  .male {font-size: 7pt;}
  /*a {color: #4CBB17;}*/
  h1 {
    font-size: 30px;
  }
  .stin {
    -moz-box-shadow: 2px 2px 3px #666;
    -webkit-box-shadow: 2px 2px 3px #666;
    box-shadow: 2px 2px 3px #666;
  }
  #mystery-box {
    font-size:17px; 
    width: 32px;
    background-color: #3276B1; 
    color: white;
    margin-top: 15px; 
    padding-top:4px;
    padding-bottom:1px;
    padding-left:12px;
    border: 0px solid white;
    -moz-border-radius:    6px;
    -webkit-border-radius: 6px;
    border-radius:         6px;

  }
</style>

</head>
<body>


  <!-- Wrap all page content here -->
  <div id="wrap">

    <!-- Begin page content -->
    <div class="container">

      <div class="page-header" style="position:relative">
        <h1 class="stroj"><a href="http://tomkren.cz">tomkren cz</a></h1>
        <canvas id="canvas-hra"></canvas>

      </div>

      <p class="lead">
        <a href="http://fishtron.net" 
           class="stin btn btn-primary btn-lg">fishtron.net</a>
      </p>

      <p>
        <a href="mandelbrot.html">Mandelbrot</a><br>
        <a href="sesitek.html">Sešítek</a>
      </p>

      <p class="male">
        <a href="tex/thesis.pdf">diplomka</a><br>
        <a href="tex/evogp13/evogp.pdf">článek 1</a><br>
      </p>

      <input type="text" class="stin stroj" id="mystery-box" value="?">

    </div>
  </div>

  <div id="footer">
    <div class="container">

    <div class="text-muted credit male">
      <a href="http://tomkren.cz">tomkren.cz</a>
        (jakože ofiko r<span id="admin">y</span>líz) <br>
      <a href="http://git.tomkren.cz/tomkren.github.io">
        git.tomkren.cz/tomkren.github.io</a>
        <a href="http://git.tomkren.cz/tomkren.github.io/fishtron.html">
        [ft]</a>
        (z repa na serveru)<br>
      <a href="http://tomkren.github.io">tomkren.github.io</a>
        <a href="http://tomkren.github.io/fishtron.html">
        [ft]</a>
        (z origin repa)<br>
      <a href="http://localhost/tomkren.github.io">
        localhost/tomkren.github.io</a>
        <a href="http://localhost/tomkren.github.io/fishtron.html">
        [ft]</a> (lokálek)<br>
      <a href="http://146.255.30.53:8080">
        146.255.30.53:8080</a> (node.js pokus)
      </div>
    
    </div>
  </div>

<script>

//type dir :
var UP   = 'up';
var DOWN = 'down';
var LEFT = 'left';
var RIGHT= 'right';
var FRONT= 'front';

//type mode:
var SEDI = 'sedi';
var CHODI= 'chodi';
var STOJI= 'stoji';

var panakImgs = {
  p1   : {x:0, y:1, w:13,h:33},
  p5   : {x:53,y:1, w:12,h:33},
  chodL: {},
  stojL: {},
  chodR: {},
  stojR: {},
  sed  : {x:1, y:36,w:14,h:31},
  sed2 : {x:16,y:36,w:14,h:33}
};

var imgOs = {
  sedi: {
    front: [{x:16,y:36,w:14,h:33}],
    right: [{x:30+14, y:36, w:15,h:31,dx:4,dy:2}], 
    left:  [{x:30+14+15, y:36, w:15,h:31,dx:-4,dy:2}],
  },
  stoji: {
    front: [{x:0, y:1, w:13,h:33}],
    right: [{x:14, y:1, w:13,h:33,dx:2}],
    left:  [{x:30, y:36, w:13,h:33,dx:-1}]
  },
  chodi: {
    right: [{x:40, y:1, w:13,h:33}],
  }
} 


//type panakStavy :
var SEDI_FRONT  = {mode:SEDI,  dir:FRONT};
var STOJI_FRONT = {mode:STOJI, dir:FRONT};
var STOJI_RIGHT = {mode:STOJI, dir:RIGHT};
var CHODI_LEFT  = {mode:CHODI, dir:LEFT };
var CHODI_RIGHT = {mode:CHODI, dir:RIGHT};

$(function () {

  var panak = {
    stav : SEDI_FRONT,
    pos  : {x:0,y:0},
  };



  var $canvas = $('#canvas-hra').attr({
    width:  300, height: 300
  }).css({
    position: 'absolute',
    left: '-15px', top: '-40px',
    border: '1px dotted white',
    'z-index': -1
  });
  var ctx = $canvas[0].getContext('2d');

  function myDraw (obj,x,y) {
    var stav = obj.stav;
    var os = imgOs[stav.mode][stav.dir];
    if (!os) {log('chybí obrazkove souřadnice:',
                  stav.mode,stav.dir);}
    var objj = os[0];
    var dx = objj.dx || 0;
    var dy = objj.dy || 0;
    var w = objj.w;
    var h = objj.h;
    ctx.drawImage(img, 
      objj.x,       objj.y,       w, h, 
      obj.pos.x+dx+x, obj.pos.y+dy+y, w, h);
  }

  function draw () {

    ctx.clearRect(0, 0, $canvas.width(), $canvas.height());

    var dx = 0;
    var dy = 0;

    ctx.beginPath();
    ctx.arc(160-11+dx,72-2+dy,6,0,2*Math.PI,false);
    ctx.fillStyle='#428BCA';
    ctx.fill();

    myDraw(panak, 153-11+dx, 40-2+dy);

  }

  var img = new Image();
  img.onload = draw;
  img.src = 'img/hra/img.png';

  var SKOK = 20;

  function arrow (smer) {
    return function(){

      var oldMode = panak.stav.mode; 
      var oldDir  = panak.stav.dir;


      if (oldMode === SEDI) {
        panak.stav.mode = STOJI;
        if (smer !== UP) {
          panak.pos.y += SKOK;
        }
      }


      switch (smer) {
        case UP   : panak.pos.y   -= SKOK; 
                    panak.stav.mode= SEDI; break;
        case DOWN : panak.stav.dir = FRONT;break;
        case LEFT :  
        case RIGHT: 
          panak.stav.dir = smer; 
          if (oldDir !== smer && oldMode === SEDI) {
            panak.stav.mode = SEDI;
            panak.pos.y -= SKOK;
          }
          break;
      }

      



      draw();
    }
  }

  keypress.combo('up',    arrow(UP));
  keypress.combo('down',  arrow(DOWN));
  keypress.combo('left',  arrow(LEFT));
  keypress.combo('right', arrow(RIGHT));


});
</script>



 
<script>
$(function() {
  $('#mystery-box').click(function(){
    $('#mystery-box').val('').animate({
      width: '350px'
    });
  }); 
  $('#mystery-box').blur(function(){
    $('#mystery-box').val('?').animate({
      width: '32px'
    });
  });
  //log('Vítejte v mé picérii!');
  $('#admin').css({
    cursor: 'pointer'
  }).click(function(){
    window.location.href = 
     'https://www.angel-hosting.cz/administrace/';
  });
});
</script>
</body>
</html>



